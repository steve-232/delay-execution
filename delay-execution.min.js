"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}var DelayExecution=function(){function g(e){var i=e.elem,t=void 0===i?null:i,n=e.func,o=void 0===n?null:n,s=e.direction,l=void 0===s?"v":s,r=e.parent,c=void 0===r?window:r,a=e.pixelDelay,u=void 0===a?0:a,d=e.timeDelay,h=void 0===d?0:d,f=e.includeElemHeight,m=void 0===f||f,v=e.debounce,w=void 0===v?500:v;if(_classCallCheck(this,g),!(t instanceof HTMLElement))throw new TypeError('"elem" is not HTMLElement');if(!(o instanceof Function))throw new TypeError('"func" is not Function');this.settings={elem:t,func:o,direction:l,parent:c,pixelDelay:u,timeDelay:h,includeElemHeight:m,debounce:w},"Window"!==c.constructor.name&&"static"===getComputedStyle(c).getPropertyValue("position")&&(c.style.position="relative"),c.addEventListener("scroll",this.checkPosition.bind(this)),this.getElemPosition(),this.checkPosition(),c.addEventListener("resize",this.followWindowResizing.bind(this))}return _createClass(g,[{key:"getElemPosition",value:function(){var e=this.settings,i=e.elem,t=e.direction,n=e.includeElemHeight,o=e.pixelDelay;this.elemPosition=("v"===t?i.offsetTop:i.offsetLeft)+o,n&&(this.elemPosition+=i.offsetHeight)}},{key:"getParentPosition",value:function(){var e=this.settings,i=e.direction,t=e.parent;return"v"!==i?"Window"===t.constructor.name?window.innerWidth+window.scrollX:t.clientWidth+t.scrollLeft:"Window"===t.constructor.name?window.innerHeight+window.scrollY:t.clientHeight+t.scrollTop}},{key:"checkPosition",value:function(){var e=this.settings,i=e.func,t=e.timeDelay,n=e.parent;this.getParentPosition()>=this.elemPosition&&(n.removeEventListener("scroll",this.checkPosition.bind(this)),n.removeEventListener("resize",this.followWindowResizing.bind(this)),setTimeout(i,t))}},{key:"followWindowResizing",value:function(){clearTimeout(this.followWindowResizingTimeout),this.followWindowResizingTimeout=setTimeout(this.getElemPosition,this.settings.debounce)}}]),g}();